<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gener√°tor test≈Ø - CHEMIE 2. roƒçn√≠k</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { 
      font-family: Arial, sans-serif; 
      background-color: #667eea;
      padding: 24px;
    }
    .container { max-width: 800px; margin: 0 auto; }
    .card { 
      background-color: white;
      background-image: 
        url("data:image/svg+xml,%3Csvg width='120' height='120' viewBox='0 0 120 120' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23f9a8d4' fill-opacity='0.15'%3E%3Ccircle cx='60' cy='60' r='12'/%3E%3Ccircle cx='25' cy='25' r='8'/%3E%3Ccircle cx='95' cy='95' r='8'/%3E%3Ccircle cx='25' cy='95' r='6'/%3E%3Ccircle cx='95' cy='25' r='6'/%3E%3C/g%3E%3Cg stroke='%23f9a8d4' stroke-width='2' fill='none' stroke-opacity='0.12'%3E%3Cpath d='M35 60 Q47 40 60 60 T85 60'/%3E%3Ccircle cx='60' cy='60' r='20'/%3E%3C/g%3E%3C/svg%3E");
      border-radius: 16px; 
      box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1); 
      padding: 32px; 
      margin-bottom: 24px; 
    }
    h1 { 
      font-size: 28px; 
      font-weight: bold; 
      color: #1f2937; 
      margin-bottom: 24px; 
      text-align: center; 
    }
    .info-box { 
      background: #fef3c7; 
      border-radius: 8px; 
      padding: 16px; 
      margin-bottom: 24px; 
    }
    .info-box p { font-size: 14px; color: #374151; line-height: 1.6; }
    .form-group { margin-bottom: 16px; }
    label { 
      display: block; 
      font-size: 14px; 
      font-weight: 500; 
      color: #374151; 
      margin-bottom: 8px; 
    }
    input[type="text"], input[type="date"], input[type="number"], select {
      width: 100%;
      padding: 10px 12px;
      border: 2px solid #d1d5db;
      border-radius: 8px;
      outline: none;
      font-size: 14px;
    }
    select {
      cursor: pointer;
      background: white;
    }
    .input-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
    }
    .btn {
      padding: 14px 40px;
      border-radius: 8px;
      font-weight: 600;
      border: none;
      cursor: pointer;
      box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1);
      font-size: 16px;
      width: 100%;
      margin-top: 8px;
    }
    .btn-primary {
      background: linear-gradient(to right, #ec4899, #f43f5e);
      color: white;
    }
    .btn-secondary {
      background: linear-gradient(to right, #6b7280, #4b5563);
      color: white;
      margin-top: 16px;
    }
    .btn:disabled {
      background: #d1d5db;
      cursor: not-allowed;
    }
    .warning {
      background: #fef3c7;
      border: 2px solid #fbbf24;
      border-radius: 8px;
      padding: 12px;
      margin-top: 16px;
    }
    .warning p { color: #92400e; font-size: 14px; text-align: center; }
    .success {
      background: #d1fae5;
      border: 2px solid #10b981;
      border-radius: 8px;
      padding: 16px;
      margin: 16px 0;
    }
    .success p { color: #065f46; font-size: 14px; }
    .instruction-box {
      background: #fef3c7;
      border-radius: 8px;
      padding: 16px;
      margin-bottom: 16px;
    }
    .instruction-box p {
      font-size: 14px;
      color: #92400e;
      line-height: 1.5;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="card">
      <h1>üß™ Gener√°tor test≈Ø z CHEMIE - 2. roƒçn√≠k</h1>
      
      <div class="info-box" id="infoBox">
        <p><strong>Jak to funguje:</strong><br>
        1. Vyber t≈ô√≠du<br>
        2. Klikni "Vygenerovat v≈°echny testy"<br>
        3. St√°hne se JEDEN soubor se V≈†EMI testy (ka≈æd√Ω student jin√© ot√°zky)<br>
        4. Vytiskni a rozdej student≈Øm</p>
      </div>

      <div class="form-group">
        <label>T≈ô√≠da:</label>
        <select id="className">
          <option value="">-- Vyber t≈ô√≠du --</option>
          <option value="2.A">2.A</option>
          <option value="2.B">2.B</option>
          <option value="5KA">6SA</option>
        </select>
      </div>

      <div class="input-row">
        <div class="form-group">
          <label>Poƒçet student≈Ø:</label>
          <input type="number" id="studentCount" value="30" min="1" max="50">
        </div>
        
        <div class="form-group">
          <label>Datum testu:</label>
          <input type="date" id="testDate">
        </div>
      </div>

      <div class="input-row">
        <div class="form-group">
          <label>Ot√°zek na test:</label>
          <input type="number" id="questionsPerTest" value="30" min="1" max="50">
        </div>
        
        <div class="form-group">
          <label>Bod≈Ø za ot√°zku:</label>
          <input type="number" id="pointsPerQuestion" value="1" min="1" max="10">
        </div>
      </div>

      <button class="btn btn-primary" onclick="generateAllTests()">
        Vygenerovat v≈°echny testy najednou
      </button>

      <button class="btn btn-secondary" onclick="window.location.href='dexin.html'">
        ‚Üê Zpƒõt na rozcestn√≠k
      </button>

      <div id="warningSection" style="display: none;">
        <div class="warning">
          <p id="warningText">Vypl≈à v≈°echny √∫daje</p>
        </div>
      </div>

      <div id="successSection" style="display: none;">
        <div class="success">
          <p><strong>‚úÖ Testy vygenerov√°ny!</strong><br>
          Soubor obsahuje <span id="testInfo"></span> test≈Ø p≈ôipraven√Ωch k tisku.</p>
        </div>
      </div>

      <div class="instruction-box" style="margin-top: 24px;">
        <p><strong>üí° Tip:</strong> Ka≈æd√Ω student dostane jin√© ot√°zky (n√°hodnƒõ vybran√© z datab√°ze). 
        Testy jsou v jednom souboru, ka≈æd√Ω test na samostatn√©m listu. Staƒç√≠ vytisknout a rozdat student≈Øm.</p>
      </div>
    </div>
  </div>

  <script>
    const questionsDatabase = {
      "Anorganika - Bor a hlin√≠k": [
        { q: "Jak√© jsou vlastnosti, vyu≈æit√≠ a v√Ωskyt boru (B)?", a: "Polokov, tvrd√Ω, nekovov√Ω vzhled; vyu≈æit√≠ ve skle, keramice, borosilik√°tov√©m skle; v√Ωskyt v boraxu" },
        { q: "Jak√© jsou vlastnosti, vyu≈æit√≠ a v√Ωskyt hlin√≠ku (Al)?", a: "Lehk√Ω, ta≈æn√Ω kov, odoln√Ω v≈Øƒçi korozi; vyu≈æit√≠ ve stavebnictv√≠, obalech, dopravƒõ; v√Ωskyt v bauxitu" },
        { q: "Jak√© jsou slouƒçeniny hlin√≠ku?", a: "Al‚ÇÇO‚ÇÉ (korund), Al(OH)‚ÇÉ, AlCl‚ÇÉ - amfotern√≠ charakter" }
      ],
      "Anorganika - Uhl√≠k a k≈ôem√≠k": [
        { q: "Jak√© jsou vlastnosti, vyu≈æit√≠ a v√Ωskyt uhl√≠ku?", a: "Nekov, v√°zan√Ω i voln√Ω (diamant, grafit); vyu≈æit√≠ v elektrod√°ch, filtrech; v√Ωskyt v uhl√≠, CO‚ÇÇ" },
        { q: "Jak√© jsou vlastnosti, vyu≈æit√≠ a v√Ωskyt k≈ôem√≠ku?", a: "Polovodiƒç, tvrd√Ω; vyu≈æit√≠ v ƒçipech, skle, betonu; v√Ωskyt v p√≠sku (SiO‚ÇÇ)" },
        { q: "Jak√© jsou slouƒçeniny uhl√≠ku a k≈ôem√≠ku?", a: "CO‚ÇÇ, CO, CH‚ÇÑ, SiO‚ÇÇ, silikony - r≈Øzn√© oxidy a organick√© slouƒçeniny" }
      ],
      "Anorganika - Dus√≠k a fosfor": [
        { q: "Jak√© jsou vlastnosti, vyu≈æit√≠ a v√Ωskyt dus√≠ku?", a: "Bezbarv√Ω plyn, nereaktivn√≠; vyu≈æit√≠ v potravin√°≈ôstv√≠, chladivech; 78 % atmosf√©ry" },
        { q: "Jak√© jsou slouƒçeniny dus√≠ku?", a: "NH‚ÇÉ, HNO‚ÇÉ, NO, NO‚ÇÇ - v√Ωznamn√© pro hnojiva a v√Ωbu≈°niny" },
        { q: "Jak√© jsou vlastnosti, vyu≈æit√≠ a v√Ωskyt fosforu?", a: "Nekov, nƒõkolik modifikac√≠ (b√≠l√Ω, ƒçerven√Ω); vyu≈æit√≠ v hnojivech, z√°palk√°ch; ve fosf√°tech" },
        { q: "Jak√© jsou slouƒçeniny fosforu?", a: "H‚ÇÉPO‚ÇÑ, P‚ÇÇO‚ÇÖ, Ca‚ÇÉ(PO‚ÇÑ)‚ÇÇ - kyseliny a soli fosforeƒçn√©" }
      ],
      "Anorganika - S√≠ra": [
        { q: "Jak√© jsou vlastnosti, vyu≈æit√≠ a v√Ωskyt s√≠ry?", a: "≈Ωlut√° pevn√° l√°tka, ho≈ôlav√°; vyu≈æit√≠ v gum√°renstv√≠, kys. s√≠rov√°; v√Ωskyt v miner√°lech a sopeƒçn√Ωch oblastech" },
        { q: "Jak√© jsou slouƒçeniny s√≠ry?", a: "SO‚ÇÇ, SO‚ÇÉ, H‚ÇÇSO‚ÇÑ - kyseliny a oxidy s√≠ry" }
      ],
      "Anorganika - Halogeny a vz√°cn√© plyny": [
        { q: "Jak√© jsou vlastnosti, vyu≈æit√≠ a v√Ωskyt chloru?", a: "Zeleno≈ælut√Ω plyn, jedovat√Ω; dezinfekce, v√Ωroba PVC; v√Ωskyt v mo≈ôsk√© soli" },
        { q: "Jak√© jsou vlastnosti, vyu≈æit√≠ a v√Ωskyt fluoru?", a: "Nejreaktivnƒõj≈°√≠ prvek, ≈ælutozelen√Ω plyn; fluoridy ve zubn√≠ hygienƒõ, Teflon; ve fluoritu (CaF‚ÇÇ)" },
        { q: "Jak√© jsou slouƒçeniny halogen≈Ø?", a: "HCl, HF, NaCl, KBr, I‚ÇÇ - kyseliny, soli, halogenidy" },
        { q: "Jak√© jsou vlastnosti, vyu≈æit√≠ a v√Ωskyt vz√°cn√Ωch plyn≈Ø?", a: "Chemicky neteƒçn√©, plynn√©; vyu≈æit√≠ v osvƒõtlov√°n√≠, chlazen√≠; ve vzduchu" }
      ],
      "Anorganika - Kovy a koordinaƒçn√≠ slouƒçeniny": [
        { q: "Jak√© jsou vlastnosti, vyu≈æit√≠ a v√Ωskyt ≈æeleza?", a: "Tvrd√Ω, magnetick√Ω kov; z√°klad oceli; v√Ωskyt v hematitu, magnetitu" },
        { q: "Jak√© jsou vlastnosti, vyu≈æit√≠ a v√Ωskyt mƒõdi?", a: "Vynikaj√≠c√≠ vodiƒç tepla a elekt≈ôiny; vyu≈æit√≠ v kabelech, slitin√°ch; v√Ωskyt v rud√°ch (chalkopyrit)" },
        { q: "Co jsou koordinaƒçn√≠ slouƒçeniny a jejich n√°zvoslov√≠?", a: "Centr√°ln√≠ atom + ligandy (nap≈ô. [Cu(NH‚ÇÉ)‚ÇÑ]¬≤‚Å∫); pojmenov√°n√≠: ligand + centr√°ln√≠ atom s ox. ƒç√≠slem" },
        { q: "Jak√© jsou vlastnosti, vyu≈æit√≠ a v√Ωskyt lanthanoid≈Ø?", a: "15 prvk≈Ø (Ce-Lu), podobn√© vlastnosti; vyu≈æit√≠ v magnetech, optice; v miner√°lech monazitu" },
        { q: "Jak√© jsou vlastnosti, vyu≈æit√≠ a v√Ωskyt aktinoid≈Ø?", a: "Radioaktivn√≠ prvky (Th-Lr); vyu≈æit√≠ v jadern√© energetice; v√Ωskyt v uranov√Ωch rud√°ch" }
      ],
      "Uhlovod√≠ky - z√°kladn√≠ pojmy": [
        { q: "Co jsou uhlovod√≠ky?", a: "Slouƒçeniny obsahuj√≠c√≠ pouze uhl√≠k a vod√≠k" },
        { q: "Co jsou alkany?", a: "Nasycen√© uhlovod√≠ky s jednoduch√Ωmi vazbami C-C, obecn√Ω vzorec C‚ÇôH‚ÇÇ‚Çô‚Çä‚ÇÇ" },
        { q: "Co jsou alkeny?", a: "Nenasycen√© uhlovod√≠ky s jednou dvojnou vazbou C=C, obecn√Ω vzorec C‚ÇôH‚ÇÇ‚Çô" },
        { q: "Co jsou alkyny?", a: "Nenasycen√© uhlovod√≠ky s jednou trojnou vazbou C‚â°C, obecn√Ω vzorec C‚ÇôH‚ÇÇ‚Çô‚Çã‚ÇÇ" },
        { q: "Co jsou areny?", a: "Aromatick√© uhlovod√≠ky s benzenov√Ωm j√°drem" },
        { q: "Co je aromaticita?", a: "Vlastnost cyklick√Ωch syst√©m≈Ø s delokalizovan√Ωmi œÄ-elektrony zaji≈°≈•uj√≠c√≠ stabilitu" }
      ],
      "Deriv√°ty uhlovod√≠k≈Ø": [
        { q: "Co jsou deriv√°ty uhlovod√≠k≈Ø?", a: "Slouƒçeniny vznikl√© n√°hradou atomu vod√≠ku v uhlovod√≠ku jinou skupinou" },
        { q: "Co jsou alkoholy?", a: "Organick√© slouƒçeniny obsahuj√≠c√≠ hydroxylovou skupinu (-OH) nav√°zanou na uhl√≠k" },
        { q: "Co jsou fenoly?", a: "Slouƒçeniny s hydroxylovou skupinou p≈ô√≠mo v√°zanou na aromatick√© j√°dro" },
        { q: "Co jsou ethery?", a: "Slouƒçeniny s kysl√≠kov√Ωm atomem spojuj√≠c√≠m dva alkylov√© nebo arylov√© zbytky (R-O-R')" },
        { q: "Co jsou estery?", a: "Deriv√°ty kyselin, kde je -OH skupina nahrazena -OR" },
        { q: "Co jsou halogenalkany?", a: "Deriv√°ty alkan≈Ø, v nich≈æ je vod√≠k nahrazen halogenem" },
        { q: "Co je skupina hydroxylov√°?", a: "Funkƒçn√≠ skupina -OH typick√° pro alkoholy a fenoly" },
        { q: "Co je nitroskupina?", a: "Funkƒçn√≠ skupina -NO‚ÇÇ" }
      ],
      "Z√°kladn√≠ reakce": [
        { q: "Co je adice?", a: "Reakce, p≈ôi kter√© se k n√°sobn√© vazbƒõ (C=C, C‚â°C) p≈ôipojuj√≠ atomy nebo skupiny a vazba se roz≈°tƒõp√≠" },
        { q: "Co je substituce?", a: "Reakce, p≈ôi kter√© se atom nebo skupina v molekule nahrad√≠ jin√Ωm" },
        { q: "Co je eliminace?", a: "Reakce, p≈ôi kter√© se z molekuly od≈°tƒõp√≠ mal√© ƒç√°stice a vznik√° n√°sobn√° vazba" },
        { q: "Co je hydratace?", a: "Adice vody na n√°sobnou vazbu" },
        { q: "Co je hydrogenace?", a: "Adice vod√≠ku na n√°sobnou vazbu, ƒçasto katalyzov√°no" },
        { q: "Co je hydrol√Ωza?", a: "Rozklad l√°tky vodou nebo hydroxidov√Ωmi ionty" },
        { q: "Co je esterifikace?", a: "Reakce kyseliny a alkoholu za vzniku esteru a vody" },
        { q: "Co je polymerace?", a: "Sluƒçov√°n√≠ mal√Ωch molekul (monomer≈Ø) na velk√© ≈ôetƒõzce (polymery)" }
      ],
      "Specifick√© reakce": [
        { q: "Co je halogenace?", a: "Zaveden√≠ halogenu (F, Cl, Br, I) do organick√© slouƒçeniny" },
        { q: "Co je chlorace?", a: "Zaveden√≠ chloru do organick√© slouƒçeniny" },
        { q: "Co je bromace?", a: "Zaveden√≠ bromu do organick√© slouƒçeniny" },
        { q: "Co je nitrace?", a: "Zaveden√≠ nitroskupiny (-NO‚ÇÇ) do molekuly, obvykle na aromatick√© j√°dro" },
        { q: "Co je sulfonace?", a: "Zaveden√≠ sulfoskupiny (-SO‚ÇÉH) do molekuly, ƒçasto na aromatick√© j√°dro" },
        { q: "Co je acylace?", a: "Zaveden√≠ acylov√© skupiny (-CO-R) do molekuly, ƒçasto na aromatick√© j√°dro" },
        { q: "Co je alkylace?", a: "Zaveden√≠ alkylov√© skupiny do organick√© slouƒçeniny" },
        { q: "Co je dehydratace?", a: "Od≈°tƒõpen√≠ molekuly vody z organick√© slouƒçeniny" },
        { q: "Co je dehydrogenace?", a: "Od≈°tƒõpen√≠ vod√≠ku, ƒçasto vede ke vzniku n√°sobn√© vazby" },
        { q: "Co je dehalogenace?", a: "Odstranƒõn√≠ atomu halogenu z molekuly" },
        { q: "Co je dehydrohalogenace?", a: "Od≈°tƒõpen√≠ HX (halogenvod√≠ku) z halogenderiv√°tu" }
      ],
      "Izomerie a stereochemie": [
        { q: "Co jsou isomery?", a: "L√°tky se stejn√Ωm sum√°rn√≠m vzorcem, ale rozd√≠lnou strukturou nebo prostorov√Ωm uspo≈ô√°d√°n√≠m" },
        { q: "Co jsou isomery konstituƒçn√≠?", a: "Li≈°√≠ se uspo≈ô√°d√°n√≠m atom≈Ø (vazeb) v molekule" },
        { q: "Co jsou stereoisomery?", a: "Izomery se stejn√Ωm po≈ôad√≠m atom≈Ø, ale odli≈°n√Ωm prostorov√Ωm uspo≈ô√°d√°n√≠m" },
        { q: "Co jsou isomery konfiguraƒçn√≠?", a: "Li≈°√≠ se trval√Ωm prostorov√Ωm uspo≈ô√°d√°n√≠m atom≈Ø, nelze je p≈ôemƒõnit bez p≈ôeru≈°en√≠ vazby" },
        { q: "Co jsou isomery konformaƒçn√≠?", a: "Li≈°√≠ se natoƒçen√≠m kolem jednoduch√© vazby, snadno p≈ôech√°zej√≠ jedna v druhou" },
        { q: "Co je konformace cis/trans?", a: "Geometrick√© izomery li≈°√≠c√≠ se polohou substituent≈Ø u dvojn√© vazby" },
        { q: "Co je konformace ≈æidliƒçkov√°/vaniƒçkov√°?", a: "R≈Øzn√© prostorov√© formy cyklohexanu, ≈æidliƒçkov√° je stabilnƒõj≈°√≠" },
        { q: "Co je konformace z√°krytov√°/nez√°krytov√°?", a: "Rozd√≠ln√© natoƒçen√≠ atom≈Ø kolem vazby, nez√°krytov√° je stabilnƒõj≈°√≠" },
        { q: "Co je chiralita?", a: "Vlastnost molekuly, kter√° nen√≠ toto≈æn√° se sv√Ωm zrcadlov√Ωm obrazem" },
        { q: "Co je centrum chirality?", a: "Uhl√≠k v√°zan√Ω na ƒçty≈ôi r≈Øzn√© substituenty" },
        { q: "Co jsou enantiomery?", a: "Dvojice zrcadlov√Ωch izomer≈Ø, kter√© nejsou stejn√© jako obraz a p≈ôedmƒõt" },
        { q: "Co je racem√°t?", a: "Smƒõs stejn√Ωch mno≈æstv√≠ obou enantiomer≈Ø, optically neaktivn√≠" },
        { q: "Co je aktivita optick√°?", a: "Schopnost l√°tky st√°ƒçet rovinu polarizovan√©ho svƒõtla" },
        { q: "Co jsou anomery?", a: "Izomery cukr≈Ø li≈°√≠c√≠ se konfigurac√≠ na anomern√≠m (karbonylov√©m) uhl√≠ku" }
      ],
      "Reakce pravidla a mechanismy": [
        { q: "Co je Markovnikovo pravidlo?", a: "P≈ôi adici HX na alken se vod√≠k v√°≈æe na uhl√≠k s v√≠ce vod√≠ky" },
        { q: "Co je Zajcevovo pravidlo?", a: "P≈ôi eliminaci se od≈°tƒõpuje vod√≠k z uhl√≠ku s men≈°√≠m poƒçtem vod√≠k≈Ø, vznik√° stabilnƒõj≈°√≠ alken" },
        { q: "Co je elektrofil?", a: "ƒå√°stice vyhled√°vaj√≠c√≠ elektrony, reaguje s m√≠stem vysok√© elektronov√© hustoty" },
        { q: "Co je nukleofil?", a: "ƒå√°stice bohat√° na elektrony, napad√° elektrofiln√≠ centrum" },
        { q: "Co je radik√°l?", a: "ƒå√°stice s nep√°rov√Ωm elektronem, velmi reaktivn√≠" },
        { q: "Co je p≈ôesmyk?", a: "Reakce, p≈ôi kter√© se mƒõn√≠ uspo≈ô√°d√°n√≠ atom≈Ø v molekule bez zmƒõny slo≈æen√≠" },
        { q: "Co je izomerace?", a: "P≈ôemƒõna jedn√© izomern√≠ formy l√°tky na jinou" },
        { q: "Co je tautomerie?", a: "Rovnov√°ha mezi dvƒõma izomern√≠mi formami, li≈°√≠c√≠mi se polohou vod√≠ku a dvojn√© vazby" },
        { q: "Co je enol?", a: "Slouƒçenina obsahuj√≠c√≠ -OH skupinu nav√°zanou na uhl√≠k s dvojnou vazbou" }
      ],
      "Skupiny a vazby": [
        { q: "Co je alkyl?", a: "Jednovazn√° uhlovod√≠kov√° skupina odvozen√° od alkanu (nap≈ô. methyl, ethyl)" },
        { q: "Co je aryl?", a: "Jednovazn√° skupina odvozen√° od aromatick√©ho uhlovod√≠ku (nap≈ô. fenyl)" },
        { q: "Co je vazba jednoduch√°?", a: "Sigma (œÉ) vazba tvo≈ôen√° sd√≠len√≠m jednoho p√°ru elektron≈Ø" },
        { q: "Co je vazba dvojn√°?", a: "Jedna sigma (œÉ) a jedna p√≠ (œÄ) vazba mezi dvƒõma atomy uhl√≠ku" },
        { q: "Co je vazba trojn√°?", a: "Jedna sigma (œÉ) a dvƒõ p√≠ (œÄ) vazby mezi uhl√≠ky" },
        { q: "Co je vazba vod√≠kov√°?", a: "Slab√° vazba mezi vod√≠kem a elektronegativn√≠m atomem (O, N, F)" }
      ],
      "Polymery a peptidy": [
        { q: "Co jsou polymery?", a: "Makromolekul√°rn√≠ l√°tky tvo≈ôen√© opakuj√≠c√≠mi se jednotkami (monomery)" },
        { q: "Co jsou peptidy?", a: "Slouƒçeniny vznikl√© spojen√≠m aminokyselin peptidovou vazbou" }
      ]
    };

    // Spoƒç√≠tat celkov√Ω poƒçet ot√°zek
    const totalQuestions = Object.values(questionsDatabase).reduce((sum, section) => sum + section.length, 0);
    
    // Nastavit dne≈°n√≠ datum
    document.getElementById('testDate').value = new Date().toISOString().split('T')[0];
    
    // Aktualizovat info box s poƒçtem ot√°zek
    document.getElementById('infoBox').innerHTML = `<p><strong>Jak to funguje:</strong><br>
      1. Vyber t≈ô√≠du<br>
      2. Zadej poƒçet student≈Ø a poƒçet ot√°zek<br>
      3. Klikni "Vygenerovat v≈°echny testy"<br>
      4. St√°hne se JEDEN soubor se V≈†EMI testy (ka≈æd√Ω student jin√© ot√°zky)<br>
      5. Vytiskni a rozdej student≈Øm<br><br>
      <strong>‚ú® V datab√°zi je ${totalQuestions} ot√°zek z chemie pro 2. roƒçn√≠k</strong></p>`;

    function generateOneTest(numberOfQuestions) {
      const sections = Object.keys(questionsDatabase);
      const totalSections = sections.length;
      const questionsPerSection = Math.floor(numberOfQuestions / totalSections);
      const remainder = numberOfQuestions % totalSections;

      let selected = [];

      sections.forEach((section, dexin) => {
        const sectionQuestions = [...questionsDatabase[section]];
        const count = questionsPerSection + (dexin < remainder ? 1 : 0);
        
        for (let i = sectionQuestions.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [sectionQuestions[i], sectionQuestions[j]] = [sectionQuestions[j], sectionQuestions[i]];
        }
        
        const selectedFromSection = sectionQuestions.slice(0, Math.min(count, sectionQuestions.length));
        selectedFromSection.forEach(q => {
          selected.push({ ...q, section });
        });
      });

      for (let i = selected.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [selected[i], selected[j]] = [selected[j], selected[i]];
      }

      return selected;
    }

    function generateAllTests() {
      const className = document.getElementById('className').value;
      const studentCount = parseInt(document.getElementById('studentCount').value) || 30;
      const testDate = document.getElementById('testDate').value;
      const questionsPerTest = parseInt(document.getElementById('questionsPerTest').value) || 30;
      const pointsPerQuestion = parseInt(document.getElementById('pointsPerQuestion').value) || 1;

      if (!className) {
        document.getElementById('warningText').textContent = 'Vyber t≈ô√≠du';
        document.getElementById('warningSection').style.display = 'block';
        return;
      }

      document.getElementById('warningSection').style.display = 'none';

      const maxPoints = questionsPerTest * pointsPerQuestion;

      let content = `<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <style>
    @media print {
      .test-page { page-break-after: always; break-after: page; }
      .test-page:last-child { page-break-after: auto; }
    }
    @media screen {
      .test-page { border-bottom: 3px solid #999; margin-bottom: 30px; padding-bottom: 20px; }
      .test-page:last-child { border-bottom: none; }
    }
    body { font-family: Arial; font-size: 9pt; line-height: 1.15; margin: 0.5cm; }
    h1 { text-align: center; font-size: 14pt; margin: 4px 0; }
    .header { border-top: 1.5px solid black; border-bottom: 1.5px solid black; padding: 3px 0; margin: 5px 0 8px 0; }
    .header p { margin: 1.5px 0; font-size: 9pt; }
    .question { border-bottom: 1px solid #ddd; padding: 1px 0; margin: 0; page-break-inside: avoid; break-inside: avoid; }
    .question-text { font-weight: bold; margin: 0 0 1px 0; font-size: 9pt; }
    .answer-field { min-height: 3.2em; border: none; padding: 2px 3px; background: transparent; margin: 0 0 1px 0; }
    .points { text-align: right; font-weight: bold; color: #c00; font-size: 8pt; margin: 0; }
    .summary { border: 1.5px solid black; padding: 8px; margin: 8px 0 8px 0; page-break-inside: avoid; break-inside: avoid; }
    .summary h2 { font-size: 11pt; margin: 0 0 5px 0; }
    .summary p { margin: 3px 0; font-size: 9pt; }
  </style>
</head>
<body>`;

      for (let studentNum = 1; studentNum <= studentCount; studentNum++) {
        if (studentNum > 1) {
          content += '<br clear=all style="page-break-before:always">';
        }

        const questions = generateOneTest(questionsPerTest);

        content += `
  <h1>TEST Z CHEMIE - 2. ROƒåN√çK</h1>
  <div class="header">
    <p><strong>Jm√©no a p≈ô√≠jmen√≠:</strong></p>
    <p><strong>T≈ô√≠da:</strong> ${className}</p>
    <p><strong>Datum:</strong> ${testDate}</p>
    <p><strong>Varianta:</strong> ${studentNum}</p>
  </div>`;

        questions.forEach((item, dexin) => {
          content += `
  <table style="width: 100%; border-collapse: collapse; page-break-inside: avoid;">
    <tr>
      <td>
        <div class="question">
          <p class="question-text">${dexin + 1}. ${item.q}</p>
          <div class="answer-field">&nbsp;</div>
          <p class="points">Bod≈Ø: _____</p>
        </div>
      </td>
    </tr>
  </table>`;
        });

        content += `
  <div class="summary">
    <h2>HODNOCEN√ç</h2>
    <br>
    <p><strong>Celkem bod≈Ø:</strong> ________________ / ${maxPoints}</p>
     <br>
    <p><strong>Zn√°mka:</strong> _____________________</p>
    <div style="border: 1px solid #ccc; min-height: 50px; margin-top: 6px; background: #fafafa;"></div>
  </div>`;
      }

      content += `
</body>
</html>`;

      const blob = new Blob([content], { type: 'application/msword' });
      const url = URL.createObjectURL(blob);
      const link = document.createElement('a');
      link.href = url;
      link.download = 'testy_chemie_2rocnik_' + className.replace(/\s+/g, '_') + '_' + testDate + '.doc';
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
      URL.revokeObjectURL(url);

      document.getElementById('testInfo').textContent = studentCount + ' (CHEMIE 2. roƒçn√≠k)';
      document.getElementById('successSection').style.display = 'block';
    }
  </script>
</body>
</html>
