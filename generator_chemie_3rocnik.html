<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gener√°tor test≈Ø - CHEMIE 3. roƒçn√≠k</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { 
      font-family: Arial, sans-serif; 
      background-color: #fce7f3;
      background-image: 
        url("data:image/svg+xml,%3Csvg width='80' height='80' viewBox='0 0 80 80' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23ec4899' fill-opacity='0.4'%3E%3Ccircle cx='40' cy='40' r='6'/%3E%3Ccircle cx='15' cy='15' r='4'/%3E%3Ccircle cx='65' cy='65' r='4'/%3E%3Ccircle cx='15' cy='65' r='3'/%3E%3Ccircle cx='65' cy='15' r='3'/%3E%3C/g%3E%3Cg stroke='%23ec4899' stroke-width='2.5' fill='none' stroke-opacity='0.35'%3E%3Ccircle cx='40' cy='40' r='12'/%3E%3Cpath d='M40 20 Q50 30 40 40 Q30 50 40 60'/%3E%3C/g%3E%3C/svg%3E"),
        repeating-linear-gradient(90deg, transparent, transparent 40px, rgba(236, 72, 153, 0.08) 40px, rgba(236, 72, 153, 0.08) 41px),
        repeating-linear-gradient(0deg, transparent, transparent 40px, rgba(236, 72, 153, 0.08) 40px, rgba(236, 72, 153, 0.08) 41px),
        linear-gradient(135deg, #fce7f3 0%, #fbcfe8 50%, #f9a8d4 100%);
      min-height: 100vh;
      padding: 24px;
    }
    .container { max-width: 800px; margin: 0 auto; }
    .card { 
      background-color: white;
      background-image: 
        url("data:image/svg+xml,%3Csvg width='120' height='120' viewBox='0 0 120 120' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23f9a8d4' fill-opacity='0.15'%3E%3Ccircle cx='60' cy='60' r='12'/%3E%3Ccircle cx='25' cy='25' r='8'/%3E%3Ccircle cx='95' cy='95' r='8'/%3E%3Ccircle cx='25' cy='95' r='6'/%3E%3Ccircle cx='95' cy='25' r='6'/%3E%3C/g%3E%3Cg stroke='%23f9a8d4' stroke-width='2' fill='none' stroke-opacity='0.12'%3E%3Cpath d='M35 60 Q47 40 60 60 T85 60'/%3E%3Ccircle cx='60' cy='60' r='20'/%3E%3C/g%3E%3C/svg%3E");
      border-radius: 16px; 
      box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1); 
      padding: 32px; 
      margin-bottom: 24px; 
    }
    h1 { 
      font-size: 28px; 
      font-weight: bold; 
      color: #1f2937; 
      margin-bottom: 24px; 
      text-align: center; 
    }
    .info-box { 
      background: #fef3c7; 
      border-radius: 8px; 
      padding: 16px; 
      margin-bottom: 24px; 
    }
    .info-box p { font-size: 14px; color: #374151; line-height: 1.6; }
    .form-group { margin-bottom: 16px; }
    label { 
      display: block; 
      font-size: 14px; 
      font-weight: 500; 
      color: #374151; 
      margin-bottom: 8px; 
    }
    input[type="text"], input[type="date"], input[type="number"], select {
      width: 100%;
      padding: 10px 12px;
      border: 2px solid #d1d5db;
      border-radius: 8px;
      outline: none;
      font-size: 14px;
    }
    select {
      cursor: pointer;
      background: white;
    }
    .input-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
    }
    .btn {
      padding: 14px 40px;
      border-radius: 8px;
      font-weight: 600;
      border: none;
      cursor: pointer;
      box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1);
      font-size: 16px;
      width: 100%;
      margin-top: 8px;
    }
    .btn-primary {
      background: linear-gradient(to right, #ec4899, #f43f5e);
      color: white;
    }
    .btn-secondary {
      background: linear-gradient(to right, #6b7280, #4b5563);
      color: white;
      margin-top: 16px;
    }
    .btn:disabled {
      background: #d1d5db;
      cursor: not-allowed;
    }
    .warning {
      background: #fef3c7;
      border: 2px solid #fbbf24;
      border-radius: 8px;
      padding: 12px;
      margin-top: 16px;
    }
    .warning p { color: #92400e; font-size: 14px; text-align: center; }
    .success {
      background: #d1fae5;
      border: 2px solid #10b981;
      border-radius: 8px;
      padding: 16px;
      margin: 16px 0;
    }
    .success p { color: #065f46; font-size: 14px; }
    .instruction-box {
      background: #fef3c7;
      border-radius: 8px;
      padding: 16px;
      margin-bottom: 16px;
    }
    .instruction-box p {
      font-size: 14px;
      color: #92400e;
      line-height: 1.5;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="card">
      <h1>üß™ Gener√°tor test≈Ø z CHEMIE - 3. roƒçn√≠k</h1>
      
      <div class="info-box" id="infoBox">
        <p><strong>Jak to funguje:</strong><br>
        1. Vyber t≈ô√≠du<br>
        2. Klikni "Vygenerovat v≈°echny testy"<br>
        3. St√°hne se JEDEN soubor se V≈†EMI testy (ka≈æd√Ω student jin√© ot√°zky)<br>
        4. Vytiskni a rozdej student≈Øm</p>
      </div>

      <div class="form-group">
        <label>T≈ô√≠da:</label>
        <select id="className">
          <option value="">-- Vyber t≈ô√≠du --</option>
          <option value="3.A">3.A</option>
          <option value="3.B">3.B</option>
          <option value="5KA">5KA</option>
        </select>
      </div>

      <div class="input-row">
        <div class="form-group">
          <label>Poƒçet student≈Ø:</label>
          <input type="number" id="studentCount" value="30" min="1" max="50">
        </div>
        
        <div class="form-group">
          <label>Datum testu:</label>
          <input type="date" id="testDate">
        </div>
      </div>

      <div class="input-row">
        <div class="form-group">
          <label>Ot√°zek na test:</label>
          <input type="number" id="questionsPerTest" value="30" min="1" max="50">
        </div>
        
        <div class="form-group">
          <label>Bod≈Ø za ot√°zku:</label>
          <input type="number" id="pointsPerQuestion" value="1" min="1" max="10">
        </div>
      </div>

      <button class="btn btn-primary" onclick="generateAllTests()">
        Vygenerovat v≈°echny testy najednou
      </button>

      <button class="btn btn-secondary" onclick="window.location.href='index.html'">
        ‚Üê Zpƒõt na rozcestn√≠k
      </button>

      <div id="warningSection" style="display: none;">
        <div class="warning">
          <p id="warningText">Vypl≈à v≈°echny √∫daje</p>
        </div>
      </div>

      <div id="successSection" style="display: none;">
        <div class="success">
          <p><strong>‚úÖ Testy vygenerov√°ny!</strong><br>
          Soubor obsahuje <span id="testInfo"></span> test≈Ø p≈ôipraven√Ωch k tisku.</p>
        </div>
      </div>

      <div class="instruction-box" style="margin-top: 24px;">
        <p><strong>üí° Tip:</strong> Ka≈æd√Ω student dostane jin√© ot√°zky (n√°hodnƒõ vybran√© z datab√°ze). 
        Testy jsou v jednom souboru, ka≈æd√Ω test na samostatn√©m listu. Staƒç√≠ vytisknout a rozdat student≈Øm.</p>
      </div>
    </div>
  </div>

  <script>
    const questionsDatabase = {
      "Karboxylov√© kyseliny a deriv√°ty": [
        { q: "Co je acyl?", a: "Zbytek karboxylov√© kyseliny po od≈°tƒõpen√≠ -OH skupiny z karboxylu" },
        { q: "Co jsou kyseliny karboxylov√©?", a: "Organick√© slouƒçeniny obsahuj√≠c√≠ karboxylovou skupinu -COOH" },
        { q: "Co je skupina karboxylov√°?", a: "Funkƒçn√≠ skupina -COOH charakteristick√° pro karboxylov√© kyseliny" },
        { q: "Co jsou deriv√°ty karboxylov√Ωch kyselin funkƒçn√≠?", a: "Slouƒçeniny vznikl√© z karboxylov√Ωch kyselin n√°hradou -OH jin√© funkƒçn√≠ skupinou" },
        { q: "Co jsou deriv√°ty karboxylov√Ωch kyselin substituƒçn√≠?", a: "Slouƒçeniny odvozen√© substituc√≠ atom≈Ø vod√≠ku v uhl√≠kov√©m ≈ôetƒõzci karboxylov√Ωch kyselin" },
        { q: "Co jsou anhydridy karboxylov√Ωch kyselin?", a: "Slouƒçeniny vznikl√© kondenzac√≠ dvou karboxylov√Ωch kyselin s od≈°tƒõpen√≠m vody" },
        { q: "Co jsou halogenidy karboxylov√Ωch kyselin?", a: "Deriv√°ty karboxylov√Ωch kyselin, kde je -OH nahrazeno halogenem" },
        { q: "Co jsou amidy?", a: "Deriv√°ty karboxylov√Ωch kyselin, kde je -OH nahrazeno -NH‚ÇÇ nebo substituovanou aminoskupinou" }
      ],
      "Aldehydy a ketony": [
        { q: "Co jsou aldehydy?", a: "Organick√© slouƒçeniny obsahuj√≠c√≠ karbonylovou skupinu -CHO na konci ≈ôetƒõzce" },
        { q: "Co jsou ketony?", a: "Organick√© slouƒçeniny s karbonylovou skupinou uprost≈ôed uhl√≠kov√©ho ≈ôetƒõzce" },
        { q: "Co je skupina karbonylov√°?", a: "Funkƒçn√≠ skupina >C=O p≈ô√≠tomn√° v aldehydech a ketonech" },
        { q: "Co je Fehlingovo ƒçinidlo?", a: "Roztok k detekci redukuj√≠c√≠ch cukr≈Ø, p≈ôi reakci vznik√° ƒçerven√Ω oxid mƒõƒèn√Ω" },
        { q: "Co je Tollensovo ƒçinidlo?", a: "Reagenƒçn√≠ roztok k prok√°z√°n√≠ aldehyd≈Ø, tvo≈ô√≠ st≈ô√≠brn√© zrc√°tko" }
      ],
      "Aminy a alkaloidy": [
        { q: "Co je aminoskupina?", a: "Funkƒçn√≠ skupina -NH‚ÇÇ p≈ô√≠tomn√° v aminokyselin√°ch a aminech" },
        { q: "Co jsou aminy?", a: "Organick√© deriv√°ty amoniaku, kde jsou vod√≠ky nahrazeny uhl√≠kov√Ωmi zbytky" },
        { q: "Co jsou alkaloidy?", a: "Dus√≠kat√© p≈ô√≠rodn√≠ l√°tky rostlinn√©ho p≈Øvodu s v√Ωrazn√Ωmi √∫ƒçinky na organismus" }
      ],
      "Aminokyseliny a proteiny": [
        { q: "Co jsou aminokyseliny?", a: "Z√°kladn√≠ stavebn√≠ jednotky b√≠lkovin obsahuj√≠c√≠ karboxylovou a aminoskupinu" },
        { q: "Co jsou esenci√°ln√≠ aminokyseliny?", a: "Aminokyseliny nezbytn√© pro organismus, kter√© si tƒõlo nedok√°≈æe samo syntetizovat" },
        { q: "Co jsou b√≠lkoviny?", a: "Vysokomolekul√°rn√≠ l√°tky slo≈æen√© z aminokyselin spojen√Ωch peptidov√Ωmi vazbami" },
        { q: "Co jsou proteiny?", a: "Jin√Ω n√°zev pro b√≠lkoviny, z√°kladn√≠ stavebn√≠ a funkƒçn√≠ makromolekuly ≈æiv√Ωch organism≈Ø" },
        { q: "Co jsou polypeptidy?", a: "≈òetƒõzce aminokyselin spojen√Ωch peptidov√Ωmi vazbami" },
        { q: "Co je vazba peptidov√°?", a: "Spojen√≠ mezi karboxylovou a aminoskupinou dvou aminokyselin" },
        { q: "Co je struktura b√≠lkovin prim√°rn√≠?", a: "Po≈ôad√≠ aminokyselin v polypeptidov√©m ≈ôetƒõzci" },
        { q: "Co je struktura b√≠lkovin sekund√°rn√≠?", a: "Pravideln√© uspo≈ô√°d√°n√≠ polypeptidu (Œ±-helix, Œ≤-skl√°dan√Ω list)" },
        { q: "Co je struktura b√≠lkovin terci√°ln√≠?", a: "Prostorov√© uspo≈ô√°d√°n√≠ cel√©ho polypeptidov√©ho ≈ôetƒõzce" },
        { q: "Co je struktura b√≠lkovin kvart√©rn√≠?", a: "Uspo≈ô√°d√°n√≠ v√≠ce polypeptidov√Ωch ≈ôetƒõzc≈Ø do funkƒçn√≠ho proteinu" },
        { q: "Co je helix?", a: "≈†roubovicov√° struktura, typick√° nap≈ô. pro sekund√°rn√≠ strukturu DNA a b√≠lkovin" },
        { q: "Co je denaturace?", a: "Poru≈°en√≠ prostorov√© struktury b√≠lkovin vlivem fyzik√°ln√≠ch nebo chemick√Ωch faktor≈Ø" },
        { q: "Co jsou glykoproteiny?", a: "Proteiny obsahuj√≠c√≠ kovalentnƒõ v√°zan√© sacharidov√© slo≈æky" },
        { q: "Co je proteosynt√©za?", a: "Proces vzniku b√≠lkovin na ribozomech podle genetick√© informace" }
      ],
      "Enzymy": [
        { q: "Co jsou enzymy?", a: "Biokatalyz√°tory urychluj√≠c√≠ chemick√© reakce v organismu" },
        { q: "Co je aktivita enzymu?", a: "M√≠ra rychlosti, s jakou enzym katalyzuje urƒçitou reakci" },
        { q: "Co je substr√°t?", a: "L√°tka, na kterou enzym p≈Øsob√≠ p≈ôi katal√Ωze" },
        { q: "Co je apoenzym?", a: "B√≠lkovinn√° ƒç√°st enzymu bez kofaktoru, sama o sobƒõ neaktivn√≠" },
        { q: "Co je holoenzym?", a: "Kompletn√≠, aktivn√≠ enzym slo≈æen√Ω z apoenzymu a kofaktoru" },
        { q: "Co jsou koenzymy?", a: "Mal√© organick√© molekuly, kter√© se v√°≈æou na enzymy a pod√≠lej√≠ se na katal√Ωze" },
        { q: "Co jsou kofaktory enzym≈Ø?", a: "Neb√≠lkovinn√© slo≈æky enzym≈Ø nutn√© pro jejich aktivitu (ionty nebo organick√© l√°tky)" },
        { q: "Co je inhibice?", a: "Sn√≠≈æen√≠ nebo zablokov√°n√≠ aktivity enzymu vlivem inhibitoru" },
        { q: "Co je apoprotein?", a: "B√≠lkovinn√° slo≈æka slo≈æen√©ho proteinu bez neb√≠lkovinn√© ƒç√°sti (prosthetick√© skupiny)" },
        { q: "Co jsou skupiny prosthetick√©?", a: "Neb√≠lkovinn√© slo≈æky pevnƒõ v√°zan√© na protein, nutn√© pro jeho funkci" }
      ],
      "Sacharidy - z√°kladn√≠ pojmy": [
        { q: "Co jsou cukry?", a: "Sacharidy, organick√© slouƒçeniny slou≈æ√≠c√≠ jako zdroj a z√°soba energie" },
        { q: "Co jsou sacharidy?", a: "Organick√© slouƒçeniny, z√°kladn√≠ zdroj energie a stavebn√≠ materi√°l bunƒõk" },
        { q: "Co jsou disacharidy?", a: "Sacharidy slo≈æen√© ze dvou monosacharidov√Ωch jednotek spojen√Ωch glykosidovou vazbou" },
        { q: "Co jsou oligosacharidy?", a: "Sacharidy slo≈æen√© z 2-10 monosacharidov√Ωch jednotek" },
        { q: "Co jsou polysacharidy?", a: "Vysokomolekul√°rn√≠ sacharidy slo≈æen√© z mnoha monosacharidov√Ωch jednotek" },
        { q: "Co jsou deoxycukry?", a: "Monosacharidy, u nich≈æ je hydroxylov√° skupina nahrazena vod√≠kem (nap≈ô. deoxyrib√≥za)" },
        { q: "Co je vazba glykosidov√°?", a: "Spojen√≠ monosacharidov√Ωch jednotek prost≈ôednictv√≠m atomu kysl√≠ku" },
        { q: "Co jsou Haworthovy vzorce?", a: "Cyklick√© zobrazen√≠ monosacharid≈Ø v rovinƒõ ≈°esti- nebo pƒõtiƒçlenn√©ho kruhu" },
        { q: "Co jsou Fischerovy vzorce?", a: "Line√°rn√≠ zobrazen√≠ monosacharid≈Ø s p≈ôesnou konfigurac√≠ chir√°ln√≠ch center" },
        { q: "Co jsou Tollensovy vzorce?", a: "Line√°rn√≠ zobrazen√≠ monosacharid≈Ø zd≈Øraz≈àuj√≠c√≠ polohu hydroxylov√Ωch skupin" }
      ],
      "Lipidy": [
        { q: "Co jsou lipidy?", a: "Rozs√°hl√° skupina p≈ô√≠rodn√≠ch l√°tek nerozpustn√Ωch ve vodƒõ, slou≈æ√≠c√≠ jako z√°sob√°rna energie" },
        { q: "Co jsou kyseliny mastn√©?", a: "Dlouho≈ôetƒõzcov√© monokarboxylov√© kyseliny, stavebn√≠ jednotky lipid≈Ø" },
        { q: "Co jsou tuky?", a: "Triacylglyceroly, z√°sobn√≠ lipidy slou≈æ√≠c√≠ jako zdroj energie a izolace" },
        { q: "Co jsou triacylglyceroly?", a: "Estery glycerolu a t≈ô√≠ mastn√Ωch kyselin, z√°kladn√≠ forma tuk≈Ø" },
        { q: "Co jsou fosfolipidy?", a: "Lipidy obsahuj√≠c√≠ glycerol, mastn√© kyseliny a fosf√°tovou skupinu, z√°klad biologick√Ωch membr√°n" },
        { q: "Co jsou steroidy?", a: "Lipidy se ƒçty≈ôƒçlenn√Ωm kondenzovan√Ωm kruhem, zahrnuj√≠ hormony a steroly" },
        { q: "Co jsou terpeny?", a: "Isoprenoidn√≠ l√°tky tvo≈ôen√© z jednotek isoprenu, ƒçasto vonn√© slo≈æky silic" },
        { q: "Co jsou isoprenoidy?", a: "Skupina p≈ô√≠rodn√≠ch l√°tek odvozen√Ωch od isoprenu (nap≈ô. terpeny, steroidy)" }
      ],
      "Nukleov√© kyseliny": [
        { q: "Co jsou kyseliny nukleov√©?", a: "Makromolekuly uchov√°vaj√≠c√≠ a p≈ôen√°≈°ej√≠c√≠ genetickou informaci (DNA, RNA)" },
        { q: "Co je DNA?", a: "Deoxyribonukleov√° kyselina, nositel genetick√© informace bunƒõk" },
        { q: "Co je RNA?", a: "Ribonukleov√° kyselina, √∫ƒçastn√≠ se p≈ôenosu a realizace genetick√© informace" },
        { q: "Co jsou b√°ze nukleov√Ωch kyselin?", a: "Dus√≠kat√© heterocyklick√© slouƒçeniny (adenin, guanin, cytosin, thymin, uracil) tvo≈ô√≠c√≠ nukleov√© kyseliny" },
        { q: "Co je komplementarita b√°z√≠?", a: "Specifick√© p√°rov√°n√≠ b√°z√≠ v nukleov√Ωch kyselin√°ch (A-T/U, G-C)" },
        { q: "Co je m-RNA?", a: "Medi√°torov√° RNA p≈ôen√°≈°ej√≠c√≠ informaci z DNA k ribozom≈Øm" },
        { q: "Co je r-RNA?", a: "Ribozom√°ln√≠ RNA, stavebn√≠ a funkƒçn√≠ slo≈æka ribozom≈Ø" },
        { q: "Co je t-RNA?", a: "Transferov√° RNA p≈ôin√°≈°ej√≠c√≠ aminokyseliny na ribozomy p≈ôi proteosynt√©ze" },
        { q: "Co je transkripce?", a: "P≈ôepis genetick√© informace z DNA do mRNA" },
        { q: "Co je translace?", a: "P≈ôeklad informace z mRNA do po≈ôad√≠ aminokyselin v b√≠lkovinƒõ" }
      ],
      "Energetick√Ω metabolismus": [
        { q: "Co je ATP?", a: "Adenosintrifosf√°t, univerz√°ln√≠ p≈ôena≈°eƒç a zdroj energie v bu≈àk√°ch" },
        { q: "Co je ADP?", a: "Adenosindifosf√°t, nukleotid vznikaj√≠c√≠ od≈°tƒõpen√≠m jedn√© fosf√°tov√© skupiny ATP" },
        { q: "Co je Acetyl CoA?", a: "Aktivovan√° forma kyseliny octov√© nav√°zan√° na koenzym A, kl√≠ƒçov√Ω meziprodukt metabolismu" },
        { q: "Co je glykol√Ωza?", a: "Metabolick√° dr√°ha, p≈ôi kter√© se gluk√≥za ≈°tƒõp√≠ na pyruv√°t a uvol≈àuje se energie" },
        { q: "Co je Krebs≈Øv cyklus?", a: "Hlavn√≠ metabolick√° dr√°ha v mitochondri√≠ch, oxidace acetyl-CoA na CO‚ÇÇ a tvorba ATP" },
        { q: "Co je d√Ωchac√≠ ≈ôetƒõzec?", a: "Soubor enzym≈Ø v mitochondri√≠ch zaji≈°≈•uj√≠c√≠ p≈ôenos elektron≈Ø a tvorbu ATP" },
        { q: "Co je Œ≤-oxidace mastn√Ωch kyselin?", a: "Postupn√© odbour√°v√°n√≠ mastn√Ωch kyselin v mitochondri√≠ch na acetyl-CoA" },
        { q: "Co je ornitinov√Ω cyklus?", a: "Metabolick√° dr√°ha v j√°trech zaji≈°≈•uj√≠c√≠ detoxikaci amoniaku na moƒçovinu" },
        { q: "Co je fotosynt√©za?", a: "Proces, p≈ôi nƒõm≈æ rostliny p≈ôemƒõ≈àuj√≠ svƒõtelnou energii na chemickou energii v gluk√≥ze" }
      ],
      "Metabolismus - obecn√© pojmy": [
        { q: "Co je biochemie?", a: "Vƒõda zkoumaj√≠c√≠ chemick√© procesy a l√°tky v ≈æiv√Ωch organismech" },
        { q: "Co je metabolismus?", a: "Souhrn v≈°ech chemick√Ωch reakc√≠ prob√≠haj√≠c√≠ch v organismu" },
        { q: "Co je katabolismus?", a: "≈†tƒõpen√≠ slo≈æitƒõj≈°√≠ch l√°tek na jednodu≈°≈°√≠ za uvolnƒõn√≠ energie" },
        { q: "Co je anabolismus?", a: "Stavba slo≈æitƒõj≈°√≠ch l√°tek z jednodu≈°≈°√≠ch za spot≈ôeby energie" }
      ],
      "Polymery a dal≈°√≠ pojmy": [
        { q: "Co jsou biopolymery?", a: "Makromolekuly p≈ô√≠rodn√≠ho p≈Øvodu, nap≈ô. b√≠lkoviny, polysacharidy, nukleov√© kyseliny" },
        { q: "Co jsou polymery?", a: "Vysokomolekul√°rn√≠ l√°tky slo≈æen√© z mnoha opakuj√≠c√≠ch se jednotek (monomer≈Ø)" },
        { q: "Co je polymerace?", a: "Proces spojov√°n√≠ monomer≈Ø do makromolekul (polymer≈Ø)" },
        { q: "Co jsou heterocyklick√© slouƒçeniny?", a: "Cyklick√© organick√© slouƒçeniny, jejich≈æ kruh obsahuje i jin√© atomy ne≈æ uhl√≠k" },
        { q: "Co jsou hormony?", a: "Biologicky aktivn√≠ l√°tky reguluj√≠c√≠ ƒçinnost organismu a jeho metabolismus" },
        { q: "Co jsou vitam√≠ny?", a: "N√≠zkohmotnostn√≠ organick√© l√°tky nezbytn√© v mal√Ωch mno≈æstv√≠ch pro spr√°vn√© fungov√°n√≠ metabolismu" }
      ]
    };

    // Spoƒç√≠tat celkov√Ω poƒçet ot√°zek
    const totalQuestions = Object.values(questionsDatabase).reduce((sum, section) => sum + section.length, 0);
    
    // Nastavit dne≈°n√≠ datum
    document.getElementById('testDate').value = new Date().toISOString().split('T')[0];
    
    // Aktualizovat info box s poƒçtem ot√°zek
    document.getElementById('infoBox').innerHTML = `<p><strong>Jak to funguje:</strong><br>
      1. Vyber t≈ô√≠du<br>
      2. Klikni "Vygenerovat v≈°echny testy"<br>
      3. St√°hne se JEDEN soubor se V≈†EMI testy (ka≈æd√Ω student jin√© ot√°zky)<br>
      4. Vytiskni a rozdej student≈Øm<br><br>
      <strong>‚ú® V datab√°zi je ${totalQuestions} ot√°zek z chemie pro 3. roƒçn√≠k</strong></p>`;

    function generateOneTest(numberOfQuestions) {
      const sections = Object.keys(questionsDatabase);
      const totalSections = sections.length;
      const questionsPerSection = Math.floor(numberOfQuestions / totalSections);
      const remainder = numberOfQuestions % totalSections;

      let selected = [];

      sections.forEach((section, index) => {
        const sectionQuestions = [...questionsDatabase[section]];
        const count = questionsPerSection + (index < remainder ? 1 : 0);
        
        for (let i = sectionQuestions.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [sectionQuestions[i], sectionQuestions[j]] = [sectionQuestions[j], sectionQuestions[i]];
        }
        
        const selectedFromSection = sectionQuestions.slice(0, Math.min(count, sectionQuestions.length));
        selectedFromSection.forEach(q => {
          selected.push({ ...q, section });
        });
      });

      for (let i = selected.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [selected[i], selected[j]] = [selected[j], selected[i]];
      }

      return selected;
    }

    function generateAllTests() {
      const className = document.getElementById('className').value;
      const studentCount = parseInt(document.getElementById('studentCount').value) || 30;
      const testDate = document.getElementById('testDate').value;
      const questionsPerTest = parseInt(document.getElementById('questionsPerTest').value) || 30;
      const pointsPerQuestion = parseInt(document.getElementById('pointsPerQuestion').value) || 1;

      if (!className) {
        document.getElementById('warningText').textContent = 'Vyber t≈ô√≠du';
        document.getElementById('warningSection').style.display = 'block';
        return;
      }

      document.getElementById('warningSection').style.display = 'none';

      const maxPoints = questionsPerTest * pointsPerQuestion;

      let content = `<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <style>
    @media print {
      .test-page { page-break-after: always; break-after: page; }
      .test-page:last-child { page-break-after: auto; }
    }
    @media screen {
      .test-page { border-bottom: 3px solid #999; margin-bottom: 30px; padding-bottom: 20px; }
      .test-page:last-child { border-bottom: none; }
    }
    body { font-family: Arial; font-size: 9pt; line-height: 1.15; margin: 0.5cm; }
    h1 { text-align: center; font-size: 14pt; margin: 4px 0; }
    .header { border-top: 1.5px solid black; border-bottom: 1.5px solid black; padding: 3px 0; margin: 5px 0 8px 0; }
    .header p { margin: 1.5px 0; font-size: 9pt; }
    .question { border-bottom: 1px solid #ddd; padding: 1px 0; margin: 0; page-break-inside: avoid; break-inside: avoid; }
    .question-text { font-weight: bold; margin: 0 0 1px 0; font-size: 9pt; }
    .answer-field { min-height: 3.2em; border: none; padding: 2px 3px; background: transparent; margin: 0 0 1px 0; }
    .points { text-align: right; font-weight: bold; color: #c00; font-size: 8pt; margin: 0; }
    .summary { border: 1.5px solid black; padding: 8px; margin: 8px 0 8px 0; page-break-inside: avoid; break-inside: avoid; }
    .summary h2 { font-size: 11pt; margin: 0 0 5px 0; }
    .summary p { margin: 3px 0; font-size: 9pt; }
  </style>
</head>
<body>`;

      for (let studentNum = 1; studentNum <= studentCount; studentNum++) {
        if (studentNum > 1) {
          content += '<br clear=all style="page-break-before:always">';
        }

        const questions = generateOneTest(questionsPerTest);

        content += `
  <h1>TEST Z CHEMIE - 3. ROƒåN√çK</h1>
  <div class="header">
    <p><strong>Jm√©no a p≈ô√≠jmen√≠:</strong></p>
    <p><strong>T≈ô√≠da:</strong> ${className}</p>
    <p><strong>Datum:</strong> ${testDate}</p>
    <p><strong>Varianta:</strong> ${studentNum}</p>
  </div>`;

        questions.forEach((item, index) => {
          content += `
  <table style="width: 100%; border-collapse: collapse; page-break-inside: avoid;">
    <tr>
      <td>
        <div class="question">
          <p class="question-text">${index + 1}. ${item.q}</p>
          <div class="answer-field">&nbsp;</div>
          <p class="points">Bod≈Ø: _____</p>
        </div>
      </td>
    </tr>
  </table>`;
        });

        content += `
  <div class="summary">
    <h2>HODNOCEN√ç</h2>
    <p><strong>Celkem bod≈Ø:</strong> __________ / ${maxPoints}</p>
    <p><strong>Zn√°mka:</strong> __________</p>
    <p><strong>Koment√°≈ô uƒçitele:</strong></p>
    <div style="border: 1px solid #ccc; min-height: 50px; margin-top: 6px; background: #fafafa;"></div>
  </div>`;
      }

      content += `
</body>
</html>`;

      const blob = new Blob([content], { type: 'application/msword' });
      const url = URL.createObjectURL(blob);
      const link = document.createElement('a');
      link.href = url;
      link.download = 'testy_chemie_3rocnik_' + className.replace(/\s+/g, '_') + '_' + testDate + '.doc';
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
      URL.revokeObjectURL(url);

      document.getElementById('testInfo').textContent = studentCount + ' (CHEMIE 3. roƒçn√≠k)';
      document.getElementById('successSection').style.display = 'block';
    }
  </script>
</body>
</html>
